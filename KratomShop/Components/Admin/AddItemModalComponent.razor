@using System.Text.Json
@using System.ComponentModel.DataAnnotations

<RadzenTemplateForm TItem="Model" Data=@model Submit=@OnSubmit InvalidSubmit=@OnInvalidSubmit>
    <RadzenFieldset Text="Personal information">
        <RadzenStack Gap="2rem" class="rz-p-4 rz-p-md-12">

            <RadzenRow AlignItems="AlignItems.Center" RowGap="0.25rem">
                <RadzenColumn Size="12" SizeMD="4" class="rz-text-align-start rz-text-align-md-end">
                    <RadzenLabel Text="Name" Component="Name" />
                </RadzenColumn>
                <RadzenColumn Size="12" SizeMD="8">
                    <RadzenTextBox style="display: block" Name="Name" @bind-Value=@model.Name class="rz-w-100" />
                    <RadzenDataAnnotationValidator Component="Name" Style="position: absolute" />
                </RadzenColumn>
            </RadzenRow>

            <RadzenRow AlignItems="AlignItems.Center" RowGap="0.25rem">
                <RadzenColumn Size="12" SizeMD="4" class="rz-text-align-start rz-text-align-md-end">
                    <RadzenLabel Text="Description" Component="Description" />
                </RadzenColumn>
                <RadzenColumn Size="12" SizeMD="8">
                    <RadzenTextArea style="display: block" Name="Description" @bind-Value=@model.Description class="rz-w-100" />
                    <RadzenDataAnnotationValidator Component="Description" Style="position: absolute" />
                </RadzenColumn>
            </RadzenRow>

            <RadzenRow AlignItems="AlignItems.Center" RowGap="0.25rem">
                <RadzenColumn Size="12" SizeMD="4" class="rz-text-align-start rz-text-align-md-end">
                    <RadzenLabel Text="Price" Component="Price" />
                </RadzenColumn>
                <RadzenColumn Size="12" SizeMD="8">
                    <RadzenNumeric style="display: block" Name="Price" @bind-Value=@model.Price class="rz-w-100" />
                    <RadzenDataAnnotationValidator Component="Price" Style="position: absolute" />
                </RadzenColumn>
            </RadzenRow>

            <RadzenRow AlignItems="AlignItems.Center" RowGap="0.25rem">
                <RadzenColumn Size="12" SizeMD="4" class="rz-text-align-start rz-text-align-md-end">
                    <RadzenLabel Text="Stock" Component="Stock" />
                </RadzenColumn>
                <RadzenColumn Size="12" SizeMD="8">
                    <RadzenNumeric style="display: block" Name="Stock" @bind-Value=@model.Stock class="rz-w-100" />
                    <RadzenDataAnnotationValidator Component="Stock" Style="position: absolute" />
                </RadzenColumn>
            </RadzenRow>

            <RadzenRow AlignItems="AlignItems.Center" RowGap="0.25rem">
                <RadzenColumn Size="12" SizeMD="4" class="rz-text-align-start rz-text-align-md-end">
                    <RadzenLabel Text="Is Active" Component="IsActive" />
                </RadzenColumn>
                <RadzenColumn Size="12" SizeMD="8">
                    <RadzenSwitch style="display: block" Name="IsActive" @bind-Value=@model.IsActive />
                    <RadzenDataAnnotationValidator Component="IsActive" Style="position: absolute" />
                </RadzenColumn>
            </RadzenRow>

            <RadzenRow AlignItems="AlignItems.Center" RowGap="0.25rem">
                <RadzenColumn Size="12" SizeMD="4" class="rz-text-align-start rz-text-align-md-end">
                    <RadzenLabel Text="Image" Component="Image" />
                </RadzenColumn>
                <RadzenColumn Size="12" SizeMD="8">
                    <RadzenFileInput @bind-Value=@model.Image @bind-FileName=@model.FileName  TValue="byte[]" Style="width: 100%"
                                     Error=@(args => OnUploadError(args, "FileInput")) InputAttributes="@(new Dictionary<string,object>(){ { "aria-label", "select file" }})" />
                    <RadzenDataAnnotationValidator Component="Image" Style="position: absolute" />
                </RadzenColumn>
            </RadzenRow>

            <RadzenRow AlignItems="AlignItems.Center" class="rz-mt-4">
                <RadzenColumn Size="12" Offset="0" SizeMD="8" OffsetMD="4">
                    <RadzenButton ButtonType="ButtonType.Submit" Text="Submit"></RadzenButton>
                </RadzenColumn>
            </RadzenRow>
        </RadzenStack>
    </RadzenFieldset>
</RadzenTemplateForm>

@code {
    class Model
    {
        [Required]
        public string Name { get; set; } = null!;
        [Required]
        public string Description { get; set; } = null!;
        [Required]
        public decimal Price { get; set; }
        [Required]
        public byte[] Image { get; set; } = null!;
        public string FileName { get; set; } = null!;
        [Required]
        public int Stock { get; set; }
        public bool IsActive { get; set; } = true;
    }

    Model model = new Model();

    void OnSubmit(Model model)
    {
        //console.Log($"Submit: {JsonSerializer.Serialize(model, new JsonSerializerOptions() { WriteIndented = true })}");
    }

    void OnInvalidSubmit(FormInvalidSubmitEventArgs args)
    {
        //console.Log($"InvalidSubmit: {JsonSerializer.Serialize(args, new JsonSerializerOptions() { WriteIndented = true })}");
    }

    void OnUploadError(UploadErrorEventArgs args, string name)
    {
        //console.Log($"{args.Message}");
    }
}
